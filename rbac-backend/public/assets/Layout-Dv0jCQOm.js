import{d as F,i as K,r as n,o as a,j as c,w as e,e as o,c as p,k as C,F as k,l as V,f as d,t as r,u as ie,a as _e,m as de,n as re,p as me,b as y,q as pe,s as L,g as b}from"./index-CGZB2ZEZ.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ve=F({__name:"Breadcrumb",setup(P){const z=K(),f=V(()=>z.matched.filter(i=>{var _;return(_=i.meta)==null?void 0:_.title}).map(i=>{var _;return{title:(_=i.meta)==null?void 0:_.title,path:i.path}}));return(x,i)=>{const _=n("icon-home"),w=n("router-link"),m=n("a-breadcrumb-item"),v=n("a-breadcrumb");return a(),c(v,null,{default:e(()=>[o(m,null,{default:e(()=>[o(w,{to:"/"},{default:e(()=>[o(_)]),_:1})]),_:1}),(a(!0),p(k,null,C(f.value,(h,M)=>(a(),c(m,{key:M},{default:e(()=>[d(r(h.title),1)]),_:2},1024))),128))]),_:1})}}}),ye={class:"logo"},ke={key:0,class:"logo-text"},he={class:"drawer-logo"},be={class:"header-left"},we={class:"header-right"},ge={class:"desktop-only"},Ce={class:"content-wrapper"},xe=F({__name:"Layout",setup(P){const z=K(),f=ie(),x=_e(),i=b(!1),_=b(!1),w=b([]),m=b([]),v=b(!1),h=b(!1),M=V(()=>x.nickname),N=V(()=>{const l=f.getRoutes().find(u=>u.name==="Layout");return(l==null?void 0:l.children)||[]}),A=()=>{h.value=window.innerWidth<768,i.value=h.value};de(()=>z.path,l=>{w.value=[l];const u=l.split("/").slice(0,2).join("/");u&&u!==l&&(m.value=[u]),h.value&&(v.value=!1)},{immediate:!0}),re(()=>{A(),window.addEventListener("resize",A)}),me(()=>{window.removeEventListener("resize",A)});const T=()=>{h.value?v.value=!0:i.value=!i.value},$=l=>{i.value=l},q=l=>{f.push(l)},W=l=>{f.push(l),v.value=!1},G=(l,u)=>{u?m.value=[l]:m.value=m.value.filter(S=>S!==l)},H=()=>{_.value=!_.value,document.body.setAttribute("arco-theme",_.value?"dark":"")},J=async l=>{l==="profile"?f.push("/profile"):l==="logout"&&(await x.logout(),f.push("/login"))};return(l,u)=>{const S=n("icon-lock"),B=n("a-menu-item"),U=n("a-sub-menu"),D=n("a-menu"),O=n("a-layout-sider"),Q=n("a-drawer"),X=n("icon-menu-unfold"),Y=n("icon-menu-fold"),R=n("a-button"),Z=n("icon-moon-fill"),ee=n("icon-sun-fill"),te=n("a-avatar"),oe=n("icon-down"),E=n("a-space"),ne=n("icon-user"),I=n("a-doption"),ae=n("icon-export"),le=n("a-dropdown"),se=n("a-layout-header"),ce=n("router-view"),ue=n("a-layout-content"),j=n("a-layout");return a(),c(j,{class:"layout"},{default:e(()=>[o(O,{width:220,collapsible:"",collapsed:i.value,onCollapse:$,class:"layout-sider desktop-sider"},{default:e(()=>[y("div",ye,[o(S,{class:"logo-icon"}),i.value?pe("",!0):(a(),p("span",ke,"RBAC System"))]),o(D,{"selected-keys":w.value,"open-keys":m.value,onMenuItemClick:q,onSubMenuClick:G,"auto-open-selected":"",collapse:i.value},{default:e(()=>[(a(!0),p(k,null,C(N.value,s=>(a(),p(k,{key:s.path},[s.children?(a(),c(U,{key:s.path},{icon:e(()=>{var t;return[(a(),c(L((t=s.meta)==null?void 0:t.icon)))]}),title:e(()=>{var t;return[d(r((t=s.meta)==null?void 0:t.title),1)]}),default:e(()=>[(a(!0),p(k,null,C(s.children.filter(t=>!t.children),t=>(a(),c(B,{key:t.path},{default:e(()=>{var g;return[d(r((g=t.meta)==null?void 0:g.title),1)]}),_:2},1024))),128))]),_:2},1024)):(a(),c(B,{key:s.path},{icon:e(()=>{var t;return[(a(),c(L((t=s.meta)==null?void 0:t.icon)))]}),default:e(()=>{var t;return[d(" "+r((t=s.meta)==null?void 0:t.title),1)]}),_:2},1024))],64))),128))]),_:1},8,["selected-keys","open-keys","collapse"])]),_:1},8,["collapsed"]),o(Q,{visible:v.value,onCancel:u[0]||(u[0]=s=>v.value=!1),width:280,placement:"left",footer:!1,"unmount-on-close":""},{title:e(()=>[y("div",he,[o(S,{class:"logo-icon"}),u[1]||(u[1]=y("span",{class:"logo-text"},"RBAC System",-1))])]),default:e(()=>[o(D,{"selected-keys":w.value,onMenuItemClick:W},{default:e(()=>[(a(!0),p(k,null,C(N.value,s=>(a(),p(k,{key:s.path},[s.children?(a(),c(U,{key:s.path},{icon:e(()=>{var t;return[(a(),c(L((t=s.meta)==null?void 0:t.icon)))]}),title:e(()=>{var t;return[d(r((t=s.meta)==null?void 0:t.title),1)]}),default:e(()=>[(a(!0),p(k,null,C(s.children.filter(t=>!t.children),t=>(a(),c(B,{key:t.path},{default:e(()=>{var g;return[d(r((g=t.meta)==null?void 0:g.title),1)]}),_:2},1024))),128))]),_:2},1024)):(a(),c(B,{key:s.path},{icon:e(()=>{var t;return[(a(),c(L((t=s.meta)==null?void 0:t.icon)))]}),default:e(()=>{var t;return[d(" "+r((t=s.meta)==null?void 0:t.title),1)]}),_:2},1024))],64))),128))]),_:1},8,["selected-keys"])]),_:1},8,["visible"]),o(j,null,{default:e(()=>[o(se,{class:"layout-header"},{default:e(()=>[y("div",be,[o(R,{type:"text",class:"menu-btn",onClick:T},{default:e(()=>[i.value?(a(),c(X,{key:0})):(a(),c(Y,{key:1}))]),_:1}),o(ve,{class:"desktop-only"})]),y("div",we,[o(E,{size:12},{default:e(()=>[o(R,{type:"text",onClick:H,class:"desktop-only"},{default:e(()=>[_.value?(a(),c(Z,{key:0})):(a(),c(ee,{key:1}))]),_:1}),o(le,{onSelect:J},{content:e(()=>[o(I,{value:"profile"},{icon:e(()=>[o(ne)]),default:e(()=>[u[2]||(u[2]=d(" Profile ",-1))]),_:1}),o(I,{value:"logout"},{icon:e(()=>[o(ae)]),default:e(()=>[u[3]||(u[3]=d(" Logout ",-1))]),_:1})]),default:e(()=>[o(R,{type:"text",class:"user-btn"},{default:e(()=>[o(E,{size:8},{default:e(()=>[o(te,{size:32,style:{backgroundColor:"#165dff"}},{default:e(()=>[d(r(M.value.charAt(0).toUpperCase()),1)]),_:1}),y("span",ge,r(M.value),1),o(oe,{class:"desktop-only"})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),o(ue,{class:"layout-content"},{default:e(()=>[y("div",Ce,[o(ce)])]),_:1})]),_:1})]),_:1})}}}),Be=fe(xe,[["__scopeId","data-v-ea8d8534"]]);export{Be as default};
